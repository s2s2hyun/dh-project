---
title: 'NextJs13 ì—ì„œ contentlayer ì‚¬ìš©í•˜ì—¬ ì •ì ë¸”ë¡œê·¸ ë§Œë“¤ê¸°(1) '
description: 'Next.Js ì—ì„œ contentlayer ì‚¬ìš©í•˜ì—¬ ì •ì ë¸”ë¡œê·¸ ì†ì‰½ê²Œ ë§Œë“¤ì–´ë³´ëŠ” ë°©ë²• '

image: '../../public/blogs/christina-wocintechchat-com-OtHEYbQXLFU-unsplash.jpg'
publishedAt: '2023-11-03'
updatedAt: '2023-11-03'
author: 'DH'
isPublished: true
tags:
  - Next.JS
  - web development
---

Next.JS í”„ë ˆì„ì›Œí¬ ì—ì„œ contentlayer ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì ë¸”ë¡œê·¸ë¥¼ ì†Œê°œ í•˜ê² ìŠµë‹ˆë‹¤.
ì •ì ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê³  ë‚˜ì„œ , ì²˜ìŒìœ¼ë¡œ ê¸€ì„ ì‘ì„±í•´ë´…ë‹ˆë‹¤.
ì²«ë²ˆì§¸ ë¸”ë¡œê·¸ ê¸€ì˜ ì£¼ì œë¡œ ì €ì˜ ì •ì  ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ì—ˆë˜ ê³¼ì •ì„ ì ì–´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

## 1. ì™œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆëŠ”ê°€?ğŸ¤”

ì €ëŠ” ê¸°ì¡´ì— ë¶€íŠ¸ìº í”„ ì½”ë“œìº í”„ì—ì„œ ì²« ì½”ë”© ê³µë¶€ë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ìì‹ ì´ ê³µë¶€í•œ ë‚´ìš©ì„ Velog ì— ì ì–´ ì¢‹ì€ ì •ë³´ë¥¼ ì „ë‹¬í•˜ìëŠ” ì·¨ì§€ë¡œ ë¸”ë¡œê·¸ ì‘ì„±ì„ ê¶Œì¥ í–ˆì—ˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ ì €ëŠ” ë¸”ë¡œê·¸ ì‘ì„±ì— ìˆì–´ì„œ ì ì‘ì„ ëª»í•´ì„œ ê·¸ëŸ°ì§€ ì´ì „ì— ì ì—ˆë˜ ë¸”ë¡œê·¸ ë‚´ìš©ì„ ë´ë„ ë­”ë§ì¸ì§€ë„ ì˜ ëª¨ë¥´ê² ê³  ì •ë§ ì œ ìì‹ ì´ ë´ë„ ì •ë§ ì°½í”¼í•˜ë‹¤ê³  ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.
ê¾¸ì¤€í•˜ê²Œ ë¸”ë¡œê·¸ ì‘ì„±ì€ ëª»í–ˆì§€ë§Œ , ë‚˜ë§Œì˜ ì›¹ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê³  ì¢€ ë” ì±…ì„ê°ì„ ì§€ë‹ˆê³  ê¾¸ì¤€í•˜ê²Œ ê³µë¶€í•œ ë‚´ìš©ì„ í•˜ë‚˜í•˜ë‚˜ ë‚´ê°€ ë§Œë“  ì›¹ì‚¬ì´íŠ¸ì— íˆìŠ¤í† ë¦¬ë¥¼ ë§Œë“¤ê³  ì‹¶ë‹¤ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë‹¤ê°€ Next.JS í™ˆí˜ì´ì§€ë¥¼ ë‘˜ëŸ¬ë³´ë‹¤ê°€ [Vercel Templates](https://vercel.com/templates) í˜ì´ì§€ ê¹Œì§€ ë“¤ì–´ê°€ê²Œ ë˜ì–´ ë‘˜ëŸ¬ë³´ë‹¤ê°€ , ì´ëŸ° ì›¹ ë””ìì¸ì˜ ë¸”ë¡œê·¸ë¥¼ í•˜ë‚˜ë¥¼ ë§Œë“¤ê³ ì‹¶ë‹¤!
ì´ìƒê°ì´ ë¬¸ëœ© ë“¤ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ì„œ í•¨ê»˜ ê³µë¶€í•œ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë¶„ì´ í™•ì¥ì mdx ë¡œ git blog ë¥¼ ì‘ì„±í•œë‹¤ê³  ë“¤ì–´ì„œ ê¶ê¸ˆí•´ì„œ google ì— í”„ë¡ íŠ¸ì—”ë“œ mdx ë¸”ë¡œê·¸ ê²€ìƒ‰ì„ í•˜ë‹¤ë³´ë‹ˆ
"Next.JS ì™€ contentlayerë¡œ MDX ë¸”ë¡œê·¸ ë§Œë“¤ê¸°" ë¼ëŠ” ë¬¸êµ¬ê°€ ë³´ì—¬ì„œ í´ë¦­ì„ í•´ë´¤ìŠµë‹ˆë‹¤.

[contentlayer](https://contentlayer.dev/) ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Next.JS ì—ì„œ ì •ì ë¸”ë¡œê·¸ë¥¼ ì†ì‰½ê²Œ ì œì‘í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì•„ì£¼ ë©‹ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ê±° ê°™ì•„ì„œ , í‡´ê·¼í•˜ê³  ë‚˜ì„œ
í•˜ë‚˜í•˜ë‚˜ ê²€ìƒ‰í•˜ë©° ì°¾ì•„ë³´ê³  contentlayer ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©ì¤‘ì— ì˜¤ë¥˜ë„ ê²ªì–´ë³´ê³  ìƒê°ë³´ë‹¤ ì¬ë°Œë˜ ê²½í—˜ì´ì˜€ìŠµë‹ˆë‹¤.

> êµ³ì´ ì™œ? ê¸°ëŠ¥ ì¢‹ì€ ë¸”ë¡œê·¸ë“¤ ì—„ì²­ ë§ì€ë° ì™œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•´? ë‹¤ë¥¸ë°ì— ì‹œê°„ ë” íˆ¬ìí•´!

ë§ì£ ... í˜„ì¬ë„ ë¶€ì¡±í•˜ì§€ë§Œ ê¶ê¸ˆí•˜ê³  í•´ë³´ê³ ì‹¶ì€ ìš•êµ¬ ë•Œë¬¸ì— ì œê°€ ì§ì ‘ ë§Œë“¤ì—ˆì„ë•Œ í° ì¥ì ì€ ì œ ë§ˆìŒëŒ€ë¡œ ë””ìì¸ì´ ê°€ëŠ¥í•œê²Œ ê°€ì¥ ë§¤ë ¥ì´ì˜€ìŠµë‹ˆë‹¤.
ë¸”ë¡œê·¸ í”Œë«í¼ì— ê°€ì¥ ì•Œë ¤ì§„ ë„¤ì´ë²„ , í‹°ìŠ¤í† ë¦¬, velog ë“±ë“± .. ë³´ë‹¤ë³´ë©´ ë ˆì´ì•„ì›ƒë§Œ ë³´ë©´ íŠ¹ì • ë¸”ë¡œê·¸ í”Œë«í¼ì´ ë– ì˜¤ë¥´ëŠ” ë””ìì¸ì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

<br />ë­ ì •ë§ ë¸”ë¡œê·¸ë¥¼ ì‹œê°„ë‚´ì„œ ì˜ ê¾¸ë¯¸ì‹ ë¶„ë“¤ì„ ë³´ë©´ ì—„ì²­ ê¸°ì¡´ì˜ ë‚¨ë“¤ì´ ì“°ëŠ”
í‹€ì´ ì•„ë‹Œ ì»¤ìŠ¤í…€ì´ êµ‰ì¥íˆ ì˜ ë§Œì ¸ì§„ê³³ë„ ë§ë”ë¼êµ¬ìš”. ë‚˜ëŠ” ë‚´ ë¸”ë¡œê·¸ì˜ ë‚˜ë§Œì˜ ìƒ‰ì„
ë­”ê°€ ì¢€ í‘œí˜„í•˜ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì— ì´ëŸ¬í•œ ë””ìì¸ì„ ë§Œë“¤ì—ˆìœ¼ë©° , ê¸°ì¡´ Next.Js 12
Pages Routerê°€ ì•„ë‹Œ Next.Js 13 App Router ë¡œ ê³µë¶€í•˜ê³ ì ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

> [í”„ë¡œì íŠ¸ ì½”ë“œ ë³´ëŸ¬ê°€ê¸° (GitHub Repository)](https://github.com/s2s2hyun/dh-project)

## 2. contentlayerë¥¼ ì‚¬ìš©í•œ ì •ì  ë¸”ë¡œê·¸ ì œì‘ğŸ‘©â€ğŸŒ¾

### 2.1contentlayerë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¨¼ì € Next.Js í”„ë¡œì íŠ¸ë¥¼ ìƒì„±.

```
npx create-next-app@latest

What is your project named? my-app
Would you like to use TypeScript? No / Yes
Would you like to use ESLint? No / Yes
Would you like to use Tailwind CSS? No / Yes
Would you like to use `src/` directory? No / Yes
Would you like to use App Router? (recommended) No / Yes
Would you like to customize the default import alias (@/*)? No / Yes
What import alias would you like configured? @/*
```

í”„ë¡œì íŠ¸ë¥¼ ìƒì„± ì™„ë£Œë˜ê³  ë‚˜ì„œ contentlayerë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ yarn ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.

```
yarn add contentlayer next-contentlayer rehype-highlight rehype-pretty-code shiki date-fns

```

rehype-highlight , rehype-pretty-code , shiki ëŠ” ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ì‘ì„±ëœ ì½”ë“œê¸€ì„ ì˜ˆì˜ê²Œ ê¾¸ë©°ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤.

ì´ì œ <bold>next.config.js</bold>ì™€ <bold>tsconfig.json</bold> íŒŒì¼ì„ ìˆ˜ì •ì„ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

### next.config.js

```
/** @type {import('next').NextConfig} */

const { withContentlayer } = require("next-contentlayer");

const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
};

module.exports = withContentlayer({ ...nextConfig });

```

reactStrictMode => React ì˜ Strict ëª¨ë“œë¥¼ í™œì„±í™” í•©ë‹ˆë‹¤. ì´ ëª¨ë“œëŠ” ê°œë°œ ëª¨ë“œì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì˜ ì ì¬ì ì¸ ë¬¸ì œë¥¼ ì°¾ëŠ”ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.
SWC Minify => swcMinifyëŠ” SWC ê¸°ë°˜ì˜ ìµœì†Œí™”ë¥¼ í™œì„±í™” í•©ë‹ˆë‹¤. ìµœì†Œí™”ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œì˜ íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì—¬ ë¡œë“œ ì‹œê°„ì„ ê°œì„ í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.

### tsconfig.json

```
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "baseUrl": "./", // ì—¬ê¸°ì— baseUrlì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"],
      "contentlayer/generated": ["./.contentlayer/generated"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}


```

### contentlayer.config.ts

<Image
  src="/blogs/nextjsfirst.png"
  width="400"
  height="300"
  alt="Image"
  sizes="100vw"
/>

í”„ë¡œì íŠ¸ë‚´ì— contentlayer.config.ts íŒŒì¼ì„ ìƒì„±í›„

```

import { makeSource, defineDocumentType } from '@contentlayer/source-files'
import readingTime from 'reading-time'
import rehypeAutolinkHeadings from 'rehype-autolink-headings'
import rehypePrettyCode from 'rehype-pretty-code'
import rehypeSlug from 'rehype-slug'
import remarkGfm from 'remark-gfm'
import GithubSlugger from 'github-slugger'

const Blog = defineDocumentType(() => ({
  name: 'Blog',
  filePathPattern: '**/**/*.mdx',
  contentType: 'mdx',
  fields: {
    title: {
      type: 'string',
      required: true,
    },
    publishedAt: {
      type: 'date',
      required: true,
    },
    updatedAt: {
      type: 'date',
      required: true,
    },
    description: {
      type: 'string',
      required: true,
    },
    image: { type: 'image' },
    isPublished: {
      type: 'boolean',
      default: true,
    },
    author: {
      type: 'string',
      required: true,
    },
    tags: {
      type: 'list',
      of: { type: 'string' },
    },
  },
  // mdx ë¡œ ì‘ì„±í•œ ê¸€ì •ë³´ì— ëŒ€í•´ì„œ ì…ë ¥í•´ì•¼ í•˜ëŠ” í•„ë“œ ì •ì˜





  computedFields: {
    url: {
      type: 'string',
      resolve: (doc) => `/blogs/${doc._raw.flattenedPath}`,
    },
    readingTime: {
      type: 'json',
      resolve: (doc) => readingTime(doc.body.raw),
    },
    toc: {
      type: 'json',
      resolve: async (doc) => {
        const regulrExp = /\n(?<flag>#{1,6})\s+(?<content>.+)/g
        const slugger = new GithubSlugger()
        const headings = Array.from(doc.body.raw.matchAll(regulrExp)).map(
          ({ groups }) => {
            const flag = groups?.flag
            const content = groups?.content

            return {
              level:
                flag?.length == 1 ? 'one' : flag?.length == 2 ? 'two' : 'three',
              text: content,
              slug: content ? slugger.slug(content) : undefined,
            }
          },
        )

        return headings
      },
    },
  },
}))

const codeOptions = {
  theme: 'github-dark',
  grid: false,
}

export default makeSource({
  // ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì´ ì €ì¥ë˜ì–´ ìˆëŠ” ë£¨íŠ¸ í´ë”
  /* options */
  contentDirPath: 'content',
  documentTypes: [Blog],
  mdx: {
    remarkPlugins: [remarkGfm],
    rehypePlugins: [
      rehypeSlug,
      [rehypeAutolinkHeadings, { behavior: 'append' }],
      [rehypePrettyCode, codeOptions],
    ],
  },
})

```

ë‚´ê°€ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜ í–ˆìœ¼ë©° , ì¼ë°˜ì ìœ¼ë¡œ ìƒê°ì„ í–ˆì„ë•Œ ì œëª© , ì‘ì„±ì¼ì ì—…ë°ì´íŠ¸ ì¼ì , ì„¤ëª… , ì´ë¯¸ì§€ , ì‘ì„±ì , íƒœê·¸(ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì‹œ ë¶„ë³„í•˜ê¸° ìœ„í•œ)
ì´ í•„ìš”ë¡œ í•˜ë‹¤ ìƒê°í•´ì„œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

<Image
  src="/blogs/nextjssecond.PNG"
  width="400"
  height="300"
  alt="Image"
  sizes="100vw"
/>

<Image
  src="/blogs/nextjsthrid.PNG"
  width="500"
  height="400"
  alt="Image"
  sizes="100vw"
/>

í˜„ì¬ ê¹Œì§€ ì‘ì„±ë°©ë²• ê¹Œì§€ ì†Œê°œë¥¼ í•´ë“œë ¸ìŠµë‹ˆë‹¤. ì´í›„ 2í¸ì—ì„œëŠ” ë‚´ê°€ ì‘ì„±í•œ ê²Œì‹œê¸€ì„ ì–´ë–»ê²Œ ë³´ì—¬ì¤„ì§€ì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì†Œê°œë¥¼ í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤
